(this["webpackJsonpdigital-signature-client"]=this["webpackJsonpdigital-signature-client"]||[]).push([[0],{54:function(e,t,n){},70:function(e,t){},71:function(e,t){},72:function(e,t){},73:function(e,t){},74:function(e,t){},97:function(e,t,n){"use strict";n.r(t);var r,a,c,i=n(1),s=n(0),o=n.n(s),u=n(46),l=n.n(u),p=(n(54),n(2)),d=n(4),f=n.n(d),h=n(10),j=n(8),b=n(12),v=n(15),w=n.n(v),x=n(47),g=n.n(x).a.create({withCredentials:!0}),O="/api/pdf";function m(e){return g.get("".concat(O,"/").concat(e)).then((function(e){return e.data}))}function k(e){return e._id?g.put(O,e).then((function(e){return e.data})):g.post(O,e).then((function(e){return e.data}))}b.GlobalWorkerOptions.workerSrc=w.a;var y,N,S,E=new FileReader,C={left:window.innerWidth-85+"px",top:window.innerHeight-165+"px",width:"80px",height:"160px",inputWidth:"200px",inputHeight:"50px",inputFontSize:"25px"},L=function(){var e=Object(s.useRef)(),t=Object(s.useRef)("file.png"),n=Object(s.useState)(!1),o=Object(j.a)(n,2),u=o[0],l=o[1],p=Object(s.useState)(),d=Object(j.a)(p,2),v=d[0],w=d[1],x=Object(s.useState)(C),g=Object(j.a)(x,2),O=g[0],m=g[1],y=Object(s.useState)(""),N=Object(j.a)(y,2),S=N[0],L=N[1],F=Object(s.useState)(!1),z=Object(j.a)(F,2),R=z[0],V=z[1];Object(s.useEffect)((function(){if(window.visualViewport)return window.visualViewport.addEventListener("resize",D),window.visualViewport.addEventListener("scroll",D),function(){window.visualViewport.removeEventListener("resize",D),window.visualViewport.removeEventListener("scroll",D)}}),[]);var D=function(e){var t={left:e.target.width+e.target.offsetLeft-1/e.target.scale*85+"px",top:e.target.height+e.target.offsetTop-1/e.target.scale*165+"px",width:1/e.target.scale*80+"px",height:1/e.target.scale*160+"px",inputWidth:1/e.target.scale*200+"px",inputHeight:1/e.target.scale*50+"px",inputFontSize:1/e.target.scale*25+"px"};m(t)};Object(s.useEffect)((function(){r=e.current.getContext("2d")}),[e]),Object(s.useEffect)((function(){if(v){var e=S?"/972".concat(S.slice(1)):"";"share"in navigator||e?window.open("https://wa.me".concat(e,"/?text=").concat(encodeURIComponent(v+" "))):window.open("https://web.whatsapp.com/send?text=".concat(encodeURIComponent(v+" ")))}}),[v]);var T=function(){var e=Object(h.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(null);case 2:if(E.onload=function(){t.current=n.target.files[0].name.split(".")[0],P(E.result),V(!0)},!n.target.files.length){e.next=6;break}return e.next=6,E.readAsDataURL(n.target.files[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function P(e){return W.apply(this,arguments)}function W(){return(W=Object(h.a)(f.a.mark((function t(n){var i,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getDocument(n).promise;case 2:return i=t.sent,t.next=5,i.getPage(1);case 5:return a=t.sent,t.next=8,a.getViewport({scale:2});case 8:return s=t.sent,e.current.height=s.height,e.current.width=s.width,c={canvasContext:r,viewport:s},t.next=14,a.render(c).promise;case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(){return(I=Object(h.a)(f.a.mark((function e(){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E.result){e.next=2;break}return e.abrupt("return");case 2:return l(!0),e.prev=3,n={data:E.result,name:t.current},e.next=7,k(n);case 7:r=e.sent,w(window.location.origin+"/preview/"+r._id);case 9:return e.prev=9,l(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[3,,9,12]])})))).apply(this,arguments)}return Object(i.jsxs)("div",{className:"create-pdf-container",children:[Object(i.jsx)("div",{className:"nav-wrapper",style:O,children:Object(i.jsxs)("div",{className:"actions flex column space-between",children:[Object(i.jsx)("input",{className:"pdf-input",id:"pdf-file-input",type:"file",accept:"application/pdf",onChange:T,hidden:!0}),Object(i.jsx)("label",{className:"upload ".concat(R?"":"no-file-selected"),htmlFor:"pdf-file-input",children:Object(i.jsx)("div",{})}),Object(i.jsx)("div",{className:"link ".concat(u?"loading":""),onClick:function(){return I.apply(this,arguments)}}),Object(i.jsx)("input",{className:"phone-number",pattern:"[0-9]{9-10}",value:S,maxLength:"10",placeholder:"\u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df",type:"tel",style:{width:O.inputWidth,height:O.inputHeight,fontSize:O.inputFontSize},onChange:function(e){return L(e.target.value.replace(/[^\d]/,""))}})]})}),Object(i.jsx)("div",{className:"canvas-container",children:Object(i.jsx)("canvas",{ref:e,className:"pdf-canvas",hidden:!R})}),Object(i.jsx)("div",{className:"no-pdf-file-message",hidden:R,children:"Please select PDF file"})]})},F=n(16);b.GlobalWorkerOptions.workerSrc=w.a;var z={left:window.innerWidth-85+"px",top:window.innerHeight-245+"px",width:"80px",height:"240px"},R=function(e){var t=e.match.params.id,n=Object(s.useRef)(),r=Object(s.useRef)(),a=Object(s.useState)(!1),c=Object(j.a)(a,2),o=c[0],u=c[1],l=Object(s.useState)(!1),p=Object(j.a)(l,2),d=p[0],v=p[1],w=Object(s.useState)(z),x=Object(j.a)(w,2),g=x[0],O=x[1],E=Object(s.useState)(),C=Object(j.a)(E,2),L=C[0],R=C[1],V=Object(s.useState)(!0),D=Object(j.a)(V,2),T=D[0],P=D[1];Object(s.useEffect)((function(){return window.visualViewport.addEventListener("resize",W),window.visualViewport.addEventListener("scroll",W),function(){window.visualViewport.removeEventListener("resize",W),window.visualViewport.removeEventListener("scroll",W)}}),[]);var W=function(e){var t={left:e.target.width+e.target.offsetLeft-1/e.target.scale*85+"px",top:e.target.height+e.target.offsetTop-1/e.target.scale*245+"px",width:1/e.target.scale*80+"px",height:1/e.target.scale*240+"px"};O(t)};function I(){return(I=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,m(t);case 4:n.current=e.sent,R(n.current.edited),M(n.current.data),u(!1),e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(1),P(!1),u(!1),e.abrupt("return");case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function M(e){return U.apply(this,arguments)}function U(){return(U=Object(h.a)(f.a.mark((function e(t){var a,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.current.edited){e.next=17;break}return e.next=3,b.getDocument(t).promise;case 3:return a=e.sent,e.next=6,a.getPage(1);case 6:return N=e.sent,e.next=9,N.getViewport({scale:2});case 9:return c=e.sent,r.current.height=c.height,r.current.width=c.width,S={canvasContext:y,viewport:c},e.next=15,N.render(S).promise;case 15:e.next=20;break;case 17:(i=new Image).onload=function(){r.current.height=i.height,r.current.width=i.width,y.drawImage(i,0,0)},i.src=t;case 20:document.body.style.zoom=1;case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){1===e.nativeEvent.which&&d&&B(e.nativeEvent.offsetX,e.nativeEvent.offsetY)}function A(e){1===e.touches.length&&d&&B(e.touches[0].clientX-e.touches[0].target.offsetLeft,e.touches[0].clientY-e.touches[0].target.offsetTop)}function B(e,t){y.lineWidth=5,y.lineCap="round",y.lineTo(e,t),y.stroke()}function G(){d&&y.beginPath()}function J(){return(J=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N&&!n.current.edited){e.next=2;break}return e.abrupt("return");case 2:return y.clearRect(0,0,r.current.width,r.current.height),e.next=5,N.render(S).promise;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(h.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.current){e.next=2;break}return e.abrupt("return");case 2:return t=r.current.toDataURL("image/png"),u(!0),v(!1),e.next=7,k(Object(F.a)(Object(F.a)({},n.current),{},{data:t}));case 7:if(a=e.sent,n.current=a,n.current){e.next=11;break}return e.abrupt("return");case 11:R(n.current.edited),M(n.current.data),u(!1);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){y=r.current.getContext("2d",{desynchronized:!0}),function(){I.apply(this,arguments)}()}),[r]),Object(i.jsxs)("div",{className:"edit-pdf-container",children:[Object(i.jsx)("div",{className:"nav-wrapper",style:g&&Object(F.a)({},g),children:Object(i.jsxs)("div",{className:"actions flex column ".concat(L||o?"justify-end":"space-between"),children:[Object(i.jsx)("button",{className:"edit ".concat(d?"active":""),onClick:function(){n.current.edited||v((function(e){return!e}))},hidden:L||o}),Object(i.jsx)("button",{className:"reset",onClick:function(){return J.apply(this,arguments)},hidden:L||o}),L?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"saved-successfuly flex align-center justify-center",children:Object(i.jsx)("p",{style:{fontSize:g.width},children:"\u05e0\u05e9\u05de\u05e8 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4!"})}),Object(i.jsx)("button",{className:"download",onClick:function(){var e,t=((null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.name)||"pdf")+".png",a=document.createElement("a");a.href=r.current.toDataURL(),a.download=t,a.click()}})]}):Object(i.jsx)("button",{className:"done ".concat(o?"loading":""),onClick:function(){return X.apply(this,arguments)}})]})}),Object(i.jsx)("div",{className:"canvas-container",children:Object(i.jsx)("canvas",{ref:r,className:"pdf-canvas",onMouseDown:H,onMouseMove:H,onMouseUp:G,onTouchStart:A,onTouchMove:A,onTouchEnd:G,style:{touchAction:d?"none":"auto"}})}),!T&&Object(i.jsx)("div",{className:"no-pdf-file-message",children:"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0 PDF \u05e7\u05d5\u05d1\u05e5"})]})},V=function(){return Object(i.jsxs)("div",{className:"app-container",children:[Object(i.jsx)("div",{className:"logo-container flex align-center",children:Object(i.jsx)("div",{className:"logo"})}),Object(i.jsxs)(p.c,{children:[Object(i.jsx)(p.a,{component:R,path:"/preview/:id"}),Object(i.jsx)(p.a,{component:L,path:"/"})]})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,98)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},T=n(22);l.a.render(Object(i.jsx)(o.a.StrictMode,{children:Object(i.jsx)(T.a,{children:Object(i.jsx)(V,{})})}),document.getElementById("root")),D()}},[[97,1,2]]]);
//# sourceMappingURL=main.6e68deb0.chunk.js.map