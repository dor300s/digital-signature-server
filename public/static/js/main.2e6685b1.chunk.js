(this["webpackJsonpdigital-signature-client"]=this["webpackJsonpdigital-signature-client"]||[]).push([[0],{54:function(e,t,n){},70:function(e,t){},71:function(e,t){},72:function(e,t){},73:function(e,t){},74:function(e,t){},97:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n.n(c),i=n(46),s=n.n(i),o=(n(54),n(2)),u=n(4),d=n.n(u),l=n(9),p=n(10),f=n(12),h=n(15),j=n.n(h),w=n(47),b=n.n(w).a.create({withCredentials:!0}),v="/api/pdf";function x(e){return b.get("".concat(v,"/").concat(e)).then((function(e){return e.data}))}function g(e){return e._id?b.put(v,e).then((function(e){return e.data})):b.post(v,e).then((function(e){return e.data}))}var O,m,k;n.p;f.GlobalWorkerOptions.workerSrc=j.a;var y,N,E,C=new FileReader,L={left:window.innerWidth-85+"px",top:window.innerHeight-165+"px",width:"80px",height:"160px"},S=function(){var e=Object(c.useRef)(),t=Object(c.useRef)("file.png"),n=Object(c.useState)(!1),a=Object(p.a)(n,2),i=a[0],s=a[1],o=Object(c.useState)(),u=Object(p.a)(o,2),h=u[0],j=u[1],w=Object(c.useState)(L),b=Object(p.a)(w,2),v=b[0],x=b[1];Object(c.useEffect)((function(){if(window.visualViewport)return window.visualViewport.addEventListener("resize",y),window.visualViewport.addEventListener("scroll",y),function(){window.visualViewport.removeEventListener("resize",y),window.visualViewport.removeEventListener("scroll",y)}}),[]);var y=function(e){var t={left:e.target.width+e.target.offsetLeft-1/e.target.scale*85+"px",top:e.target.height+e.target.offsetTop-1/e.target.scale*165+"px",width:1/e.target.scale*80+"px",height:1/e.target.scale*160+"px"};x(t)};Object(c.useEffect)((function(){O=e.current.getContext("2d")}),[e]),Object(c.useEffect)((function(){h&&("share"in navigator?window.open("whatsapp://send?text=".concat(encodeURIComponent("".concat(h," \u05d7\u05ea\u05d9\u05de\u05d4 \u05d3\u05d9\u05d2\u05d9\u05d8\u05dc\u05d9\u05ea")))):window.open("https://web.whatsapp.com/send?text=".concat(encodeURIComponent("".concat(h," \u05d7\u05ea\u05d9\u05de\u05d4 \u05d3\u05d9\u05d2\u05d9\u05d8\u05dc\u05d9\u05ea")))))}),[h]);var N=function(){var e=Object(l.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(null);case 2:if(C.onload=function(){t.current=n.target.files[0].name.split(".")[0],E(C.result)},!n.target.files.length){e.next=6;break}return e.next=6,C.readAsDataURL(n.target.files[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function E(e){return S.apply(this,arguments)}function S(){return(S=Object(l.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.getDocument(n).promise;case 2:return r=t.sent,t.next=5,r.getPage(1);case 5:return m=t.sent,t.next=8,m.getViewport({scale:2});case 8:return c=t.sent,e.current.height=c.height,e.current.width=c.width,k={canvasContext:O,viewport:c},t.next=14,m.render(k).promise;case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(){return(R=Object(l.a)(d.a.mark((function e(){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C.result){e.next=2;break}return e.abrupt("return");case 2:return s(!0),e.prev=3,n={data:C.result,name:t.current},e.next=7,g(n);case 7:r=e.sent,j(window.location.origin+"/preview/"+r._id);case 9:return e.prev=9,s(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[3,,9,12]])})))).apply(this,arguments)}return Object(r.jsxs)("div",{className:"create-pdf-container",children:[Object(r.jsx)("div",{className:"nav-wrapper",style:v,children:Object(r.jsxs)("div",{className:"actions flex column space-between",children:[Object(r.jsx)("input",{className:"pdf-input",id:"pdf-file-input",type:"file",accept:"application/pdf",onChange:N,hidden:!0}),Object(r.jsx)("label",{className:"upload",htmlFor:"pdf-file-input",children:Object(r.jsx)("div",{})}),Object(r.jsx)("div",{className:"link ".concat(i?"loading":""),onClick:function(){return R.apply(this,arguments)}})]})}),Object(r.jsx)("div",{className:"canvas-container",children:Object(r.jsx)("canvas",{ref:e,className:"pdf-canvas"})})]})},R=n(16);f.GlobalWorkerOptions.workerSrc=j.a;var V={left:window.innerWidth-85+"px",top:window.innerHeight-245+"px",width:"80px",height:"240px"},T=function(e){var t=e.match.params.id,n=Object(c.useRef)(),a=Object(c.useRef)(),i=Object(c.useState)(!1),s=Object(p.a)(i,2),o=s[0],u=s[1],h=Object(c.useState)(!1),j=Object(p.a)(h,2),w=j[0],b=j[1],v=Object(c.useState)(V),O=Object(p.a)(v,2),m=O[0],k=O[1],C=Object(c.useState)(),L=Object(p.a)(C,2),S=L[0],T=L[1];Object(c.useEffect)((function(){return window.visualViewport.addEventListener("resize",D),window.visualViewport.addEventListener("scroll",D),function(){window.visualViewport.removeEventListener("resize",D),window.visualViewport.removeEventListener("scroll",D)}}),[]);var D=function(e){var t={left:e.target.width+e.target.offsetLeft-1/e.target.scale*85+"px",top:e.target.height+e.target.offsetTop-1/e.target.scale*245+"px",width:1/e.target.scale*80+"px",height:1/e.target.scale*240+"px"};k(t)};function F(){return(F=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,x(t);case 3:if(n.current=e.sent,n.current){e.next=6;break}return e.abrupt("return");case 6:T(n.current.edited),z(n.current.data),u(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(d.a.mark((function e(t){var r,c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.current.edited){e.next=17;break}return e.next=3,f.getDocument(t).promise;case 3:return r=e.sent,e.next=6,r.getPage(1);case 6:return N=e.sent,e.next=9,N.getViewport({scale:2});case 9:return c=e.sent,a.current.height=c.height,a.current.width=c.width,E={canvasContext:y,viewport:c},e.next=15,N.render(E).promise;case 15:e.next=20;break;case 17:(i=new Image).onload=function(){a.current.height=i.height,a.current.width=i.width,y.drawImage(i,0,0)},i.src=t;case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){1===e.nativeEvent.which&&w&&P(e.nativeEvent.offsetX,e.nativeEvent.offsetY)}function U(e){1===e.touches.length&&w&&P(e.touches[0].clientX-e.touches[0].target.offsetLeft,e.touches[0].clientY-e.touches[0].target.offsetTop)}function P(e,t){y.lineWidth=5,y.lineCap="round",y.lineTo(e,t),y.stroke()}function W(){w&&y.beginPath()}function A(){return(A=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N&&!n.current.edited){e.next=2;break}return e.abrupt("return");case 2:return y.clearRect(0,0,a.current.width,a.current.height),e.next=5,N.render(E).promise;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(l.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.current){e.next=2;break}return e.abrupt("return");case 2:return t=a.current.toDataURL("image/png"),u(!0),b(!1),e.next=7,g(Object(R.a)(Object(R.a)({},n.current),{},{data:t}));case 7:if(r=e.sent,n.current=r,n.current){e.next=11;break}return e.abrupt("return");case 11:T(n.current.edited),z(n.current.data),u(!1);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){y=a.current.getContext("2d",{desynchronized:!0}),function(){F.apply(this,arguments)}()}),[a]),Object(r.jsxs)("div",{className:"edit-pdf-container",children:[Object(r.jsx)("div",{className:"nav-wrapper",style:m&&Object(R.a)({},m),children:Object(r.jsxs)("div",{className:"actions flex column ".concat(S||o?"justify-end":"space-between"),children:[Object(r.jsx)("button",{className:"edit ".concat(w?"active":""),onClick:function(){n.current.edited||b((function(e){return!e}))},hidden:S||o}),Object(r.jsx)("button",{className:"reset",onClick:function(){return A.apply(this,arguments)},hidden:S||o}),S?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"saved-successfuly flex align-center justify-center",children:Object(r.jsx)("p",{style:{fontSize:m.width},children:"\u05e0\u05e9\u05de\u05e8 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4!"})}),Object(r.jsx)("button",{className:"download",onClick:function(){var e,t=((null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.name)||"\u05e7\u05d1\u05dc\u05d4")+".png",r=document.createElement("a");r.href=a.current.toDataURL(),r.download=t,r.click()}})]}):Object(r.jsx)("button",{className:"done ".concat(o?"loading":""),onClick:function(){return B.apply(this,arguments)}})]})}),Object(r.jsx)("div",{className:"canvas-container",children:Object(r.jsx)("canvas",{ref:a,className:"pdf-canvas",onMouseDown:M,onMouseMove:M,onMouseUp:W,onTouchStart:U,onTouchMove:U,onTouchEnd:W,style:{touchAction:w?"none":"auto"}})})]})},D=function(){return Object(r.jsxs)("div",{className:"app-container",children:[Object(r.jsx)("div",{className:"logo-container flex align-center",children:Object(r.jsx)("div",{className:"logo"})}),Object(r.jsxs)(o.c,{children:[Object(r.jsx)(o.a,{component:T,path:"/preview/:id"}),Object(r.jsx)(o.a,{component:S,path:"/"})]})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,98)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},z=n(22);s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(z.a,{children:Object(r.jsx)(D,{})})}),document.getElementById("root")),F()}},[[97,1,2]]]);
//# sourceMappingURL=main.2e6685b1.chunk.js.map