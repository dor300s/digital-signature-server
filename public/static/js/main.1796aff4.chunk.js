(this["webpackJsonpdigital-signature-client"]=this["webpackJsonpdigital-signature-client"]||[]).push([[0],{54:function(e,t,n){},70:function(e,t){},71:function(e,t){},72:function(e,t){},73:function(e,t){},74:function(e,t){},97:function(e,t,n){"use strict";n.r(t);var r,a,c,i=n(1),s=n(0),o=n.n(s),u=n(46),p=n.n(u),l=(n(54),n(2)),d=n(4),f=n.n(d),h=n(10),j=n(9),w=n(12),b=n(15),x=n.n(b),v=n(47),g=n.n(v).a.create({withCredentials:!0}),O="/api/pdf";function m(e){return g.get("".concat(O,"/").concat(e)).then((function(e){return e.data}))}function k(e){return e._id?g.put(O,e).then((function(e){return e.data})):g.post(O,e).then((function(e){return e.data}))}w.GlobalWorkerOptions.workerSrc=x.a;var y,N,E,C=new FileReader,S={left:window.innerWidth-85+"px",top:window.innerHeight-165+"px",width:"80px",height:"160px",inputWidth:"200px",inputHeight:"50px",inputFontSize:"25px"},L=function(){var e=Object(s.useRef)(),t=Object(s.useRef)("file.png"),n=Object(s.useState)(!1),o=Object(j.a)(n,2),u=o[0],p=o[1],l=Object(s.useState)(),d=Object(j.a)(l,2),b=d[0],x=d[1],v=Object(s.useState)(S),g=Object(j.a)(v,2),O=g[0],m=g[1],y=Object(s.useState)(""),N=Object(j.a)(y,2),E=N[0],L=N[1];Object(s.useEffect)((function(){if(window.visualViewport)return window.visualViewport.addEventListener("resize",z),window.visualViewport.addEventListener("scroll",z),function(){window.visualViewport.removeEventListener("resize",z),window.visualViewport.removeEventListener("scroll",z)}}),[]);var z=function(e){var t={left:e.target.width+e.target.offsetLeft-1/e.target.scale*85+"px",top:e.target.height+e.target.offsetTop-1/e.target.scale*165+"px",width:1/e.target.scale*80+"px",height:1/e.target.scale*160+"px",inputWidth:1/e.target.scale*200+"px",inputHeight:1/e.target.scale*50+"px",inputFontSize:1/e.target.scale*25+"px"};m(t)};Object(s.useEffect)((function(){r=e.current.getContext("2d")}),[e]),Object(s.useEffect)((function(){if(b){var e=E?"/972".concat(E.slice(1)):"";"share"in navigator||e?window.open("https://wa.me".concat(e,"/?text=").concat(encodeURIComponent("".concat(b," \u05d7\u05ea\u05d9\u05de\u05d4 \u05d3\u05d9\u05d2\u05d9\u05d8\u05dc\u05d9\u05ea")))):window.open("https://web.whatsapp.com/send?text=".concat(encodeURIComponent("".concat(b," \u05d7\u05ea\u05d9\u05de\u05d4 \u05d3\u05d9\u05d2\u05d9\u05d8\u05dc\u05d9\u05ea"))))}}),[b]);var R=function(){var e=Object(h.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(null);case 2:if(C.onload=function(){t.current=n.target.files[0].name.split(".")[0],V(C.result)},!n.target.files.length){e.next=6;break}return e.next=6,C.readAsDataURL(n.target.files[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function V(e){return F.apply(this,arguments)}function F(){return(F=Object(h.a)(f.a.mark((function t(n){var i,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.getDocument(n).promise;case 2:return i=t.sent,t.next=5,i.getPage(1);case 5:return a=t.sent,t.next=8,a.getViewport({scale:2});case 8:return s=t.sent,e.current.height=s.height,e.current.width=s.width,c={canvasContext:r,viewport:s},t.next=14,a.render(c).promise;case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(){return(T=Object(h.a)(f.a.mark((function e(){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C.result){e.next=2;break}return e.abrupt("return");case 2:return p(!0),e.prev=3,n={data:C.result,name:t.current},e.next=7,k(n);case 7:r=e.sent,x(window.location.origin+"/preview/"+r._id);case 9:return e.prev=9,p(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[3,,9,12]])})))).apply(this,arguments)}return Object(i.jsxs)("div",{className:"create-pdf-container",children:[Object(i.jsx)("div",{className:"nav-wrapper",style:O,children:Object(i.jsxs)("div",{className:"actions flex column space-between",children:[Object(i.jsx)("input",{className:"pdf-input",id:"pdf-file-input",type:"file",accept:"application/pdf",onChange:R,hidden:!0}),Object(i.jsx)("label",{className:"upload",htmlFor:"pdf-file-input",children:Object(i.jsx)("div",{})}),Object(i.jsx)("div",{className:"link ".concat(u?"loading":""),onClick:function(){return T.apply(this,arguments)}}),Object(i.jsx)("input",{className:"phone-number",pattern:"[0-9]{9-10}",value:E,maxLength:"10",placeholder:"\u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df",type:"tel",style:{width:O.inputWidth,height:O.inputHeight,fontSize:O.inputFontSize},onChange:function(e){return L(e.target.value.replace(/[^\d]/,""))}})]})}),Object(i.jsx)("div",{className:"canvas-container",children:Object(i.jsx)("canvas",{ref:e,className:"pdf-canvas"})})]})},z=n(16);w.GlobalWorkerOptions.workerSrc=x.a;var R={left:window.innerWidth-85+"px",top:window.innerHeight-245+"px",width:"80px",height:"240px"},V=function(e){var t=e.match.params.id,n=Object(s.useRef)(),r=Object(s.useRef)(),a=Object(s.useState)(!1),c=Object(j.a)(a,2),o=c[0],u=c[1],p=Object(s.useState)(!1),l=Object(j.a)(p,2),d=l[0],b=l[1],x=Object(s.useState)(R),v=Object(j.a)(x,2),g=v[0],O=v[1],C=Object(s.useState)(),S=Object(j.a)(C,2),L=S[0],V=S[1];Object(s.useEffect)((function(){return window.visualViewport.addEventListener("resize",F),window.visualViewport.addEventListener("scroll",F),function(){window.visualViewport.removeEventListener("resize",F),window.visualViewport.removeEventListener("scroll",F)}}),[]);var F=function(e){var t={left:e.target.width+e.target.offsetLeft-1/e.target.scale*85+"px",top:e.target.height+e.target.offsetTop-1/e.target.scale*245+"px",width:1/e.target.scale*80+"px",height:1/e.target.scale*240+"px"};O(t)};function T(){return(T=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,m(t);case 3:if(n.current=e.sent,n.current){e.next=6;break}return e.abrupt("return");case 6:V(n.current.edited),W(n.current.data),u(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return D.apply(this,arguments)}function D(){return(D=Object(h.a)(f.a.mark((function e(t){var a,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.current.edited){e.next=17;break}return e.next=3,w.getDocument(t).promise;case 3:return a=e.sent,e.next=6,a.getPage(1);case 6:return N=e.sent,e.next=9,N.getViewport({scale:2});case 9:return c=e.sent,r.current.height=c.height,r.current.width=c.width,E={canvasContext:y,viewport:c},e.next=15,N.render(E).promise;case 15:e.next=20;break;case 17:(i=new Image).onload=function(){r.current.height=i.height,r.current.width=i.width,y.drawImage(i,0,0)},i.src=t;case 20:console.log(window),document.body.style.zoom=1;case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){1===e.nativeEvent.which&&d&&U(e.nativeEvent.offsetX,e.nativeEvent.offsetY)}function M(e){1===e.touches.length&&d&&U(e.touches[0].clientX-e.touches[0].target.offsetLeft,e.touches[0].clientY-e.touches[0].target.offsetTop)}function U(e,t){y.lineWidth=5,y.lineCap="round",y.lineTo(e,t),y.stroke()}function H(){d&&y.beginPath()}function P(){return(P=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N&&!n.current.edited){e.next=2;break}return e.abrupt("return");case 2:return y.clearRect(0,0,r.current.width,r.current.height),e.next=5,N.render(E).promise;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(h.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.current){e.next=2;break}return e.abrupt("return");case 2:return t=r.current.toDataURL("image/png"),u(!0),b(!1),e.next=7,k(Object(z.a)(Object(z.a)({},n.current),{},{data:t}));case 7:if(a=e.sent,n.current=a,n.current){e.next=11;break}return e.abrupt("return");case 11:V(n.current.edited),W(n.current.data),u(!1);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){y=r.current.getContext("2d",{desynchronized:!0}),function(){T.apply(this,arguments)}()}),[r]),Object(i.jsxs)("div",{className:"edit-pdf-container",children:[Object(i.jsx)("div",{className:"nav-wrapper",style:g&&Object(z.a)({},g),children:Object(i.jsxs)("div",{className:"actions flex column ".concat(L||o?"justify-end":"space-between"),children:[Object(i.jsx)("button",{className:"edit ".concat(d?"active":""),onClick:function(){n.current.edited||b((function(e){return!e}))},hidden:L||o}),Object(i.jsx)("button",{className:"reset",onClick:function(){return P.apply(this,arguments)},hidden:L||o}),L?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"saved-successfuly flex align-center justify-center",children:Object(i.jsx)("p",{style:{fontSize:g.width},children:"\u05e0\u05e9\u05de\u05e8 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4!"})}),Object(i.jsx)("button",{className:"download",onClick:function(){var e,t=((null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.name)||"\u05e7\u05d1\u05dc\u05d4")+".png",a=document.createElement("a");a.href=r.current.toDataURL(),a.download=t,a.click()}})]}):Object(i.jsx)("button",{className:"done ".concat(o?"loading":""),onClick:function(){return A.apply(this,arguments)}})]})}),Object(i.jsx)("div",{className:"canvas-container",children:Object(i.jsx)("canvas",{ref:r,className:"pdf-canvas",onMouseDown:I,onMouseMove:I,onMouseUp:H,onTouchStart:M,onTouchMove:M,onTouchEnd:H,style:{touchAction:d?"none":"auto"}})})]})},F=function(){return Object(i.jsxs)("div",{className:"app-container",children:[Object(i.jsx)("div",{className:"logo-container flex align-center",children:Object(i.jsx)("div",{className:"logo"})}),Object(i.jsxs)(l.c,{children:[Object(i.jsx)(l.a,{component:V,path:"/preview/:id"}),Object(i.jsx)(l.a,{component:L,path:"/"})]})]})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,98)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},W=n(22);p.a.render(Object(i.jsx)(o.a.StrictMode,{children:Object(i.jsx)(W.a,{children:Object(i.jsx)(F,{})})}),document.getElementById("root")),T()}},[[97,1,2]]]);
//# sourceMappingURL=main.1796aff4.chunk.js.map