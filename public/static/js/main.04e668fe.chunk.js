(this["webpackJsonpdigital-signature-client"]=this["webpackJsonpdigital-signature-client"]||[]).push([[0],{39:function(t,e,n){},56:function(t,e){},57:function(t,e){},58:function(t,e){},59:function(t,e){},60:function(t,e){},79:function(t,e,n){"use strict";n.r(e);var r,c,a,i=n(0),o=n(3),u=n.n(o),s=n(31),f=n.n(s),p=(n(39),n(2)),l=n.n(p),h=n(4),d=n(6),j=n(11),b=n(32),g=n.n(b),v=n(33),x=n.n(v).a.create({withCredentials:!0}),O="/api/pdf";function w(t){return x.get("".concat(O,"/").concat(t)).then((function(t){return t.data}))}function m(t){return x.post(O,t).then((function(t){return t.data}))}j.GlobalWorkerOptions.workerSrc=g.a;var k,y=!1,C=new FileReader,E=function(){var t=window.location.pathname.slice(1),e=Object(o.useRef)(),n=Object(o.useState)(!1),u=Object(d.a)(n,2),s=u[0],f=u[1],p=Object(o.useState)(),b=Object(d.a)(p,2),g=b[0],v=b[1],x=Object(o.useState)(!1),O=Object(d.a)(x,2),E=O[0],L=O[1];function T(){return(T=Object(h.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:if(k=e.sent){e.next=5;break}return e.abrupt("return");case 5:S(k.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(o.useEffect)((function(){r=e.current.getContext("2d")}),[e.current]),Object(o.useEffect)((function(){t&&function(){T.apply(this,arguments)}()}),[t]);var D=function(){var t=Object(h.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C.onload=function(){S(C.result)},t.next=3,C.readAsDataURL(e.target.files[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function S(t){return F.apply(this,arguments)}function F(){return(F=Object(h.a)(l.a.mark((function t(n){var i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.getDocument(n).promise;case 2:return i=t.sent,t.next=5,i.getPage(1);case 5:return c=t.sent,t.next=8,c.getViewport({scale:2});case 8:return o=t.sent,e.current.height=o.height,e.current.width=o.width,a={canvasContext:r,viewport:o},t.next=14,c.render(a).promise;case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(){E&&(y=!0)}function N(){E&&(y=!1,r.beginPath())}function R(t,e){r.lineWidth=5,r.lineCap="round",r.lineTo(t,e),r.stroke()}function A(){return(A=Object(h.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=2;break}return t.abrupt("return");case 2:return r.clearRect(0,0,e.current.width,e.current.height),t.next=5,c.render(a).promise;case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(){return(P=Object(h.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),e={data:C.result},t.next=4,m(e);case 4:n=t.sent,f(!1),v(window.location.origin+"/"+n._id);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsxs)("div",{className:"nav-wrapper",children:[Object(i.jsx)("input",{className:"pdf-input",id:"pdf-file-input",type:"file",accept:"application/pdf",onChange:D,hidden:!0}),t?Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{onClick:function(){return L((function(t){return!t}))},children:"EDIT"}),Object(i.jsx)("p",{children:E?"yes":"no"}),Object(i.jsx)("button",{onClick:function(){return A.apply(this,arguments)},children:"CLEAR"}),Object(i.jsx)("button",{onClick:function(){return e.current.toDataURL("image/png"),console.log(navigator),void console.log(navigator.share)},children:"SEND"})]}):Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"pdf-file-input",children:"UPLOAD"}),Object(i.jsx)("button",{onClick:function(){return P.apply(this,arguments)},children:"GET LINK"}),s&&Object(i.jsx)("p",{children:"Loading..."}),g&&Object(i.jsx)("p",{children:g})]})]}),Object(i.jsx)("canvas",{ref:e,className:"pdf-canvas",onMouseDown:M,onMouseMove:function(t){1===t.nativeEvent.which&&y&&E&&R(t.nativeEvent.offsetX,t.nativeEvent.offsetY)},onMouseUp:N,onTouchStart:M,onTouchMove:function(t){1===t.touches.length&&y&&R(t.touches[0].clientX-t.touches[0].target.offsetLeft,t.touches[0].clientY-t.touches[0].target.offsetTop)},onTouchEnd:N,style:{touchAction:E?"none":"auto"}})]})},L=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,80)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),r(t),c(t),a(t),i(t)}))};f.a.render(Object(i.jsx)(u.a.StrictMode,{children:Object(i.jsx)(E,{})}),document.getElementById("root")),L()}},[[79,1,2]]]);
//# sourceMappingURL=main.04e668fe.chunk.js.map