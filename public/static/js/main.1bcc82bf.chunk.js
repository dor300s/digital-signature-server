(this["webpackJsonpdigital-signature-client"]=this["webpackJsonpdigital-signature-client"]||[]).push([[0],{54:function(e,t,n){},70:function(e,t){},71:function(e,t){},72:function(e,t){},73:function(e,t){},74:function(e,t){},97:function(e,t,n){"use strict";n.r(t);var r,a,c,i=n(1),s=n(0),o=n.n(s),u=n(45),l=n.n(u),p=(n(54),n(2)),f=n(4),d=n.n(f),h=n(9),v=n(10),j=n(12),w=n(15),g=n.n(w),b=n(46),x=n.n(b).a.create({withCredentials:!0}),O="/api/pdf";function m(e){return x.get("".concat(O,"/").concat(e)).then((function(e){return e.data}))}function k(e){return x.post(O,e).then((function(e){return e.data}))}j.GlobalWorkerOptions.workerSrc=g.a;var y,N,E,C=new FileReader,L={left:window.innerWidth-85+"px",top:window.innerHeight-165+"px",width:"80px",height:"160px"},S=function(){var e=Object(s.useRef)(),t=Object(s.useRef)("file.png"),n=Object(s.useState)(!1),o=Object(v.a)(n,2),u=o[0],l=o[1],p=Object(s.useState)(),f=Object(v.a)(p,2),w=f[0],g=f[1],b=Object(s.useState)(L),x=Object(v.a)(b,2),O=x[0],m=x[1];Object(s.useEffect)((function(){if(window.visualViewport)return window.visualViewport.addEventListener("resize",y),window.visualViewport.addEventListener("scroll",y),function(){window.visualViewport.removeEventListener("resize",y),window.visualViewport.removeEventListener("scroll",y)}}),[]);var y=function(e){var t={left:e.target.width+e.target.offsetLeft-1/e.target.scale*85+"px",top:e.target.height+e.target.offsetTop-1/e.target.scale*165+"px",width:1/e.target.scale*80+"px",height:1/e.target.scale*160+"px"};m(t)};Object(s.useEffect)((function(){r=e.current.getContext("2d")}),[e]),Object(s.useEffect)((function(){w&&navigator.clipboard.writeText(w)}),[w]);var N=function(){var e=Object(h.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(null),C.onload=function(){t.current=n.target.files[0].name.split(".")[0],E(C.result)},!n.target.files.length){e.next=5;break}return e.next=5,C.readAsDataURL(n.target.files[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function E(e){return S.apply(this,arguments)}function S(){return(S=Object(h.a)(d.a.mark((function t(n){var i,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.getDocument(n).promise;case 2:return i=t.sent,t.next=5,i.getPage(1);case 5:return a=t.sent,t.next=8,a.getViewport({scale:2});case 8:return s=t.sent,e.current.height=s.height,e.current.width=s.width,c={canvasContext:r,viewport:s},t.next=14,a.render(c).promise;case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function V(){return(V=Object(h.a)(d.a.mark((function e(){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C.result){e.next=2;break}return e.abrupt("return");case 2:return l(!0),e.prev=3,n={data:C.result,name:t.current},e.next=7,k(n);case 7:r=e.sent,g(window.location.origin+"/"+r._id);case 9:return e.prev=9,l(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[3,,9,12]])})))).apply(this,arguments)}return Object(i.jsxs)("div",{className:"create-pdf-container",children:[Object(i.jsx)("div",{className:"nav-wrapper",style:O,children:Object(i.jsxs)("div",{className:"actions flex column space-between",children:[Object(i.jsx)("input",{className:"pdf-input",id:"pdf-file-input",type:"file",accept:"application/pdf",onChange:N,hidden:!0}),Object(i.jsx)("label",{className:"upload",htmlFor:"pdf-file-input",children:Object(i.jsx)("div",{})}),Object(i.jsx)("div",{className:"link ".concat(u?"loading":w?"copied":""),onClick:function(){return V.apply(this,arguments)}})]})}),Object(i.jsx)("div",{className:"canvas-container",children:Object(i.jsx)("canvas",{ref:e,className:"pdf-canvas"})})]})},V=n(48);j.GlobalWorkerOptions.workerSrc=g.a;var T={left:window.innerWidth-85+"px",top:window.innerHeight-245+"px",width:"80px",height:"240px"},R=function(e){var t=e.match.params.id,n=Object(s.useRef)(),r=Object(s.useRef)(),a=Object(s.useState)(!1),c=Object(v.a)(a,2),o=(c[0],c[1]),u=Object(s.useState)(!1),l=Object(v.a)(u,2),p=l[0],f=l[1],w=Object(s.useState)(T),g=Object(v.a)(w,2),b=g[0],x=g[1];Object(s.useEffect)((function(){return window.visualViewport.addEventListener("resize",O),window.visualViewport.addEventListener("scroll",O),function(){window.visualViewport.removeEventListener("resize",O),window.visualViewport.removeEventListener("scroll",O)}}),[]);var O=function(e){var t={left:e.target.width+e.target.offsetLeft-1/e.target.scale*85+"px",top:e.target.height+e.target.offsetTop-1/e.target.scale*245+"px",width:1/e.target.scale*80+"px",height:1/e.target.scale*240+"px"};x(t)};function k(){return(k=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,m(t);case 3:if(n.current=e.sent,o(!1),n.current){e.next=7;break}return e.abrupt("return");case 7:C(n.current.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return L.apply(this,arguments)}function L(){return(L=Object(h.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getDocument(t).promise;case 2:return n=e.sent,e.next=5,n.getPage(1);case 5:return N=e.sent,e.next=8,N.getViewport({scale:2});case 8:return a=e.sent,r.current.height=a.height,r.current.width=a.width,E={canvasContext:y,viewport:a},e.next=14,N.render(E).promise;case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){}function R(){p&&y.beginPath()}function D(e,t){y.lineWidth=5,y.lineCap="round",y.lineTo(e,t),y.stroke()}function F(){return(F=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=2;break}return e.abrupt("return");case 2:return y.clearRect(0,0,r.current.width,r.current.height),e.next=5,N.render(E).promise;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){y=r.current.getContext("2d"),function(){k.apply(this,arguments)}()}),[r]),Object(i.jsxs)("div",{className:"edit-pdf-container",children:[Object(i.jsx)("div",{className:"nav-wrapper",style:b&&Object(V.a)({},b),children:Object(i.jsxs)("div",{className:"actions flex column space-between",children:[Object(i.jsx)("button",{className:"edit ".concat(p?"active":""),onClick:function(){return f((function(e){return!e}))}}),Object(i.jsx)("button",{className:"reset",onClick:function(){return F.apply(this,arguments)}}),Object(i.jsx)("button",{className:"share",onClick:function(){var e,t=r.current.toDataURL("image/png"),a=(null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.name)||"\u05e7\u05d1\u05dc\u05d4",c=[function(e,t){for(var n=e.split(","),r=n[0].match(/:(.*?);/)[1],a=atob(n[1]),c=a.length,i=new Uint8Array(c);c--;)i[c]=a.charCodeAt(c);return new File([i],t,{type:r})}(t,a+".png")];navigator.share?navigator.share({files:c,text:a}).then((function(){return console.log("Share was successful.")})).catch((function(e){return console.log("Sharing failed",e)})):console.log("Your system doesn't support sharing files.")}})]})}),Object(i.jsx)("div",{className:"canvas-container",children:Object(i.jsx)("canvas",{ref:r,className:"pdf-canvas",onMouseDown:S,onMouseMove:function(e){1===e.nativeEvent.which&&p&&D(e.nativeEvent.offsetX,e.nativeEvent.offsetY)},onMouseUp:R,onTouchStart:S,onTouchMove:function(e){1===e.touches.length&&p&&D(e.touches[0].clientX-e.touches[0].target.offsetLeft,e.touches[0].clientY-e.touches[0].target.offsetTop)},onTouchEnd:R,style:{touchAction:p?"none":"auto"}})})]})},D=function(){return Object(i.jsxs)("div",{className:"app-container",children:[Object(i.jsx)("div",{className:"logo-container flex align-center",children:Object(i.jsx)("div",{className:"logo",children:"D-signature"})}),Object(i.jsxs)(p.c,{children:[Object(i.jsx)(p.a,{component:R,path:"/:id"}),Object(i.jsx)(p.a,{component:S,path:"/"})]})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,98)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},M=n(21);l.a.render(Object(i.jsx)(o.a.StrictMode,{children:Object(i.jsx)(M.a,{children:Object(i.jsx)(D,{})})}),document.getElementById("root")),F()}},[[97,1,2]]]);
//# sourceMappingURL=main.1bcc82bf.chunk.js.map