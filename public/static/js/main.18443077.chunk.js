(this["webpackJsonpdigital-signature-client"]=this["webpackJsonpdigital-signature-client"]||[]).push([[0],{54:function(e,t,n){},70:function(e,t){},71:function(e,t){},72:function(e,t){},73:function(e,t){},74:function(e,t){},97:function(e,t,n){"use strict";n.r(t);var r,a,c,i=n(1),s=n(0),o=n.n(s),u=n(45),l=n.n(u),p=(n(54),n(2)),f=n(4),d=n.n(f),h=n(9),v=n(10),w=n(12),j=n(15),g=n.n(j),b=n(46),x=n.n(b).a.create({withCredentials:!0}),O="/api/pdf";function m(e){return x.get("".concat(O,"/").concat(e)).then((function(e){return e.data}))}function k(e){return x.post(O,e).then((function(e){return e.data}))}w.GlobalWorkerOptions.workerSrc=g.a;var y,N,E,C,L=new FileReader,S={left:window.innerWidth-85+"px",top:window.innerHeight-165+"px",width:"80px",height:"160px"},T=function(){var e=Object(s.useRef)(),t=Object(s.useState)(!1),n=Object(v.a)(t,2),o=n[0],u=n[1],l=Object(s.useState)(),p=Object(v.a)(l,2),f=p[0],j=p[1],g=Object(s.useState)(S),b=Object(v.a)(g,2),x=b[0],O=b[1];Object(s.useEffect)((function(){if(window.visualViewport)return window.visualViewport.addEventListener("resize",m),window.visualViewport.addEventListener("scroll",m),function(){window.visualViewport.removeEventListener("resize",m),window.visualViewport.removeEventListener("scroll",m)}}),[]);var m=function(e){var t={left:e.target.width+e.target.offsetLeft-1/e.target.scale*85+"px",top:e.target.height+e.target.offsetTop-1/e.target.scale*165+"px",width:1/e.target.scale*80+"px",height:1/e.target.scale*160+"px"};O(t)};Object(s.useEffect)((function(){r=e.current.getContext("2d")}),[e]),Object(s.useEffect)((function(){f&&navigator.clipboard.writeText(f)}),[f]);var y=function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(null),L.onload=function(){N(L.result)},!t.target.files.length){e.next=5;break}return e.next=5,L.readAsDataURL(t.target.files[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function N(e){return E.apply(this,arguments)}function E(){return(E=Object(h.a)(d.a.mark((function t(n){var i,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.getDocument(n).promise;case 2:return i=t.sent,t.next=5,i.getPage(1);case 5:return a=t.sent,t.next=8,a.getViewport({scale:2});case 8:return s=t.sent,e.current.height=s.height,e.current.width=s.width,c={canvasContext:r,viewport:s},t.next=14,a.render(c).promise;case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(){return(C=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L.result){e.next=2;break}return e.abrupt("return");case 2:return u(!0),e.prev=3,t={data:L.result},e.next=7,k(t);case 7:n=e.sent,j(window.location.origin+"/"+n._id);case 9:return e.prev=9,u(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[3,,9,12]])})))).apply(this,arguments)}return Object(i.jsxs)("div",{className:"create-pdf-container",children:[Object(i.jsx)("div",{className:"nav-wrapper",style:x,children:Object(i.jsxs)("div",{className:"actions flex column space-between",children:[Object(i.jsx)("input",{className:"pdf-input",id:"pdf-file-input",type:"file",accept:"application/pdf",onChange:y,hidden:!0}),Object(i.jsx)("label",{className:"upload",htmlFor:"pdf-file-input",children:Object(i.jsx)("div",{})}),Object(i.jsx)("div",{className:"link ".concat(o?"loading":f?"copied":""),onClick:function(){return C.apply(this,arguments)}})]})}),Object(i.jsx)("div",{className:"canvas-container",children:Object(i.jsx)("canvas",{ref:e,className:"pdf-canvas"})})]})},V=n(48);w.GlobalWorkerOptions.workerSrc=g.a;var D={left:window.innerWidth-85+"px",top:window.innerHeight-245+"px",width:"80px",height:"240px"},F=function(e){var t=e.match.params.id,n=Object(s.useRef)(),r=Object(s.useState)(!1),a=Object(v.a)(r,2),c=(a[0],a[1]),o=Object(s.useState)(!1),u=Object(v.a)(o,2),l=u[0],p=u[1],f=Object(s.useState)(D),j=Object(v.a)(f,2),g=j[0],b=j[1];Object(s.useEffect)((function(){return window.visualViewport.addEventListener("resize",x),window.visualViewport.addEventListener("scroll",x),function(){window.visualViewport.removeEventListener("resize",x),window.visualViewport.removeEventListener("scroll",x)}}),[]);var x=function(e){var t={left:e.target.width+e.target.offsetLeft-1/e.target.scale*85+"px",top:e.target.height+e.target.offsetTop-1/e.target.scale*245+"px",width:1/e.target.scale*80+"px",height:1/e.target.scale*240+"px"};b(t)};function O(){return(O=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,m(t);case 3:if(C=e.sent,c(!1),C){e.next=7;break}return e.abrupt("return");case 7:k(C.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return L.apply(this,arguments)}function L(){return(L=Object(h.a)(d.a.mark((function e(t){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getDocument(t).promise;case 2:return r=e.sent,e.next=5,r.getPage(1);case 5:return N=e.sent,e.next=8,N.getViewport({scale:2});case 8:return a=e.sent,n.current.height=a.height,n.current.width=a.width,E={canvasContext:y,viewport:a},e.next=14,N.render(E).promise;case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){}function T(){l&&y.beginPath()}function F(e,t){y.lineWidth=5,y.lineCap="round",y.lineTo(e,t),y.stroke()}function P(){return(P=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=2;break}return e.abrupt("return");case 2:return y.clearRect(0,0,n.current.width,n.current.height),e.next=5,N.render(E).promise;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){y=n.current.getContext("2d"),function(){O.apply(this,arguments)}()}),[n]),Object(i.jsxs)("div",{className:"edit-pdf-container",children:[Object(i.jsx)("div",{className:"nav-wrapper",style:g&&Object(V.a)({},g),children:Object(i.jsxs)("div",{className:"actions flex column space-between",children:[Object(i.jsx)("button",{className:"edit ".concat(l?"active":""),onClick:function(){return p((function(e){return!e}))}}),Object(i.jsx)("button",{className:"reset",onClick:function(){return P.apply(this,arguments)}}),Object(i.jsx)("button",{className:"share",onClick:function(){var e=[function(e,t){for(var n=e.split(","),r=n[0].match(/:(.*?);/)[1],a=atob(n[1]),c=a.length,i=new Uint8Array(c);c--;)i[c]=a.charCodeAt(c);return new File([i],t,{type:r})}(n.current.toDataURL("image/png"),"Testttttt.png")];navigator.canShare&&navigator.canShare({files:e})?navigator.share({files:e,title:"Pictures",text:"Our Pictures."}).then((function(){return console.log("Share was successful.")})).catch((function(e){return console.log("Sharing failed",e)})):console.log("Your system doesn't support sharing files.")}})]})}),Object(i.jsx)("div",{className:"canvas-container",children:Object(i.jsx)("canvas",{ref:n,className:"pdf-canvas",onMouseDown:S,onMouseMove:function(e){1===e.nativeEvent.which&&l&&F(e.nativeEvent.offsetX,e.nativeEvent.offsetY)},onMouseUp:T,onTouchStart:S,onTouchMove:function(e){1===e.touches.length&&l&&F(e.touches[0].clientX-e.touches[0].target.offsetLeft,e.touches[0].clientY-e.touches[0].target.offsetTop)},onTouchEnd:T,style:{touchAction:l?"none":"auto"}})})]})},P=function(){return Object(i.jsxs)("div",{className:"app-container",children:[Object(i.jsx)("div",{className:"logo-container flex align-center",children:Object(i.jsx)("div",{className:"logo",children:"D-signature"})}),Object(i.jsxs)(p.c,{children:[Object(i.jsx)(p.a,{component:F,path:"/:id"}),Object(i.jsx)(p.a,{component:T,path:"/"})]})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,98)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},R=n(21);l.a.render(Object(i.jsx)(o.a.StrictMode,{children:Object(i.jsx)(R.a,{children:Object(i.jsx)(P,{})})}),document.getElementById("root")),M()}},[[97,1,2]]]);
//# sourceMappingURL=main.18443077.chunk.js.map