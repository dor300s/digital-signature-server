(this["webpackJsonpdigital-signature-client"]=this["webpackJsonpdigital-signature-client"]||[]).push([[0],{53:function(t,e,n){},69:function(t,e){},70:function(t,e){},71:function(t,e){},72:function(t,e){},73:function(t,e){},96:function(t,e,n){"use strict";n.r(e);var r,c,a,i=n(1),o=n(0),s=n.n(o),u=n(45),l=n.n(u),f=(n(53),n(2)),p=n(4),h=n.n(p),d=n(9),j=n(12),b=n(11),g=n(15),x=n.n(g),v=n(46),O=n.n(v).a.create({withCredentials:!0}),w="/api/pdf";function m(t){return O.get("".concat(w,"/").concat(t)).then((function(t){return t.data}))}function k(t){return O.post(w,t).then((function(t){return t.data}))}b.GlobalWorkerOptions.workerSrc=x.a;var y,C,S,E,N=new FileReader,T=function(){var t=Object(o.useRef)(),e=Object(o.useState)(!1),n=Object(j.a)(e,2),s=n[0],u=n[1],l=Object(o.useState)(),f=Object(j.a)(l,2),p=f[0],g=f[1];Object(o.useEffect)((function(){console.log(t),r=t.current.getContext("2d")}),[t]);var x=function(){var t=Object(d.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N.onload=function(){v(N.result),console.log(N)},e.target.files[0],t.next=4,N.readAsDataURL(e.target.files[0]);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function v(t){return O.apply(this,arguments)}function O(){return(O=Object(d.a)(h.a.mark((function e(n){var i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getDocument(n).promise;case 2:return i=e.sent,e.next=5,i.getPage(1);case 5:return c=e.sent,e.next=8,c.getViewport({scale:2});case 8:return o=e.sent,t.current.height=o.height,t.current.width=o.width,a={canvasContext:r,viewport:o},e.next=14,c.render(a).promise;case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(d.a)(h.a.mark((function t(){var e,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),e={data:N.result},t.next=4,k(e);case 4:n=t.sent,u(!1),g(window.location.origin+"/"+n._id);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(i.jsxs)("div",{className:"create-pdf-container",children:[Object(i.jsxs)("div",{className:"nav-wrapper",children:[Object(i.jsx)("input",{className:"pdf-input",id:"pdf-file-input",type:"file",accept:"application/pdf",onChange:x,hidden:!0}),Object(i.jsxs)("div",{className:"actions",children:[Object(i.jsx)("label",{htmlFor:"pdf-file-input",children:"UPLOAD"}),Object(i.jsx)("button",{onClick:function(){return w.apply(this,arguments)},children:"GET LINK"})]}),s&&Object(i.jsx)("p",{children:"Loading..."}),p&&Object(i.jsx)("p",{children:p})]}),Object(i.jsx)("canvas",{ref:t,className:"pdf-canvas"})]})};b.GlobalWorkerOptions.workerSrc=x.a;var D=function(t){var e=t.match.params.id,n=Object(o.useRef)(),r=Object(o.useState)(!1),c=Object(j.a)(r,2),a=(c[0],c[1]),s=Object(o.useState)(!1),u=Object(j.a)(s,2),l=u[0],f=u[1];function p(){return(p=Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(!0),t.next=3,m(e);case 3:if(E=t.sent,a(!1),E){t.next=7;break}return t.abrupt("return");case 7:g(E.data);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t){return x.apply(this,arguments)}function x(){return(x=Object(d.a)(h.a.mark((function t(e){var r,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getDocument(e).promise;case 2:return r=t.sent,t.next=5,r.getPage(1);case 5:return C=t.sent,t.next=8,C.getViewport({scale:2});case 8:return c=t.sent,n.current.height=c.height,n.current.width=c.width,S={canvasContext:y,viewport:c},t.next=14,C.render(S).promise;case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){}function O(){l&&y.beginPath()}function w(t,e){y.lineWidth=5,y.lineCap="round",y.lineTo(t,e),y.stroke()}function k(){return(k=Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(C){t.next=2;break}return t.abrupt("return");case 2:return y.clearRect(0,0,n.current.width,n.current.height),t.next=5,C.render(S).promise;case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(o.useEffect)((function(){console.log(n),y=n.current.getContext("2d"),function(){p.apply(this,arguments)}(),console.log(t)}),[n]),Object(i.jsxs)("div",{className:"edit-pdf-container",children:[Object(i.jsx)("div",{className:"nav-wrapper",children:Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{onClick:function(){return f((function(t){return!t}))},children:"EDIT"}),Object(i.jsx)("button",{onClick:function(){return k.apply(this,arguments)},children:"CLEAR"}),Object(i.jsx)("h3",{children:l?"yes":"no"}),Object(i.jsx)("button",{onClick:function(){var t=[function(t,e){for(var n=t.split(","),r=n[0].match(/:(.*?);/)[1],c=atob(n[1]),a=c.length,i=new Uint8Array(a);a--;)i[a]=c.charCodeAt(a);return new File([i],e,{type:r})}(n.current.toDataURL("image/png"),"Testttttt.png")];navigator.canShare&&navigator.canShare({files:t})?navigator.share({files:t,title:"Pictures",text:"Our Pictures."}).then((function(){return console.log("Share was successful.")})).catch((function(t){return console.log("Sharing failed",t)})):console.log("Your system doesn't support sharing files.")},children:"SEND"})]})}),Object(i.jsx)("canvas",{ref:n,className:"pdf-canvas",onMouseDown:v,onMouseMove:function(t){1===t.nativeEvent.which&&l&&w(t.nativeEvent.offsetX,t.nativeEvent.offsetY)},onMouseUp:O,onTouchStart:v,onTouchMove:function(t){1===t.touches.length&&l&&w(t.touches[0].clientX-t.touches[0].target.offsetLeft,t.touches[0].clientY-t.touches[0].target.offsetTop)},onTouchEnd:O,style:{touchAction:l?"none":"auto"}})]})},L=function(){return Object(i.jsx)("div",{className:"app-container",children:Object(i.jsxs)(f.c,{children:[Object(i.jsx)(f.a,{component:D,path:"/:id"}),Object(i.jsx)(f.a,{component:T,path:"/"})]})})},P=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,97)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),r(t),c(t),a(t),i(t)}))},F=n(21);l.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(F.a,{children:Object(i.jsx)(L,{})})}),document.getElementById("root")),P()}},[[96,1,2]]]);
//# sourceMappingURL=main.22711b56.chunk.js.map